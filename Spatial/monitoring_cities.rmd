---
output: 
  html_document:
    highlight: tango
    toc: true
    toc_float: true
    toc_depth: 4
    number_sections: false
    df_print: kable
knit: furmanr::knit_output_dir("C:/Users/brenner/Documents/GitHub/guides")
---

\newcommand\first[1]{\color{darkblue}{\textbf{#1}}}
\newcommand\second[1]{\color{dodgerblue}{\textbf{#1}}}
\newcommand\third[1]{\color{skyblue}{\textrm{#1}}}

[Return to Main Page](new_spatial_index.html)

```{r include=FALSE}
library(kableExtra)

knitr::opts_chunk$set(message = FALSE, warning = FALSE)

output <- function(data) {
  knitr::kable(data) %>% 
    kable_styling(full_width = F)
  }
```

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Remote Sensing}$

****

![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/cities_space1.png)

![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/cities_space2.jpg)

****

### $\second{Night Lights}$

|Name |Defense Meteorological Satellite Program (DMSP), Operational Line Scanner(OLS) |Suomi National Polar Orbiting Partnership (NPP), Visible Infrared Imaging Radiometer Suite (VIIRS) |
|:------|:----------|:----------|
|**Satellite** |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/dmsp.jpg" width="250"> |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/suomi-npp.jpg" width="250"> |
|**Availability** |1992 to 2014 |2011 to Present |
|**Spatial Resolution** |1 km |0.5 km |
|**Temporal Resolution** |Daily (yearly on GEE) |Daily (monthly on GEE) |
|**Radiance Digital Number (DN)** |6 bit numbers (0 - 64) |7 bit numbers (0 - 128) |

```
//Use SRTM elevation data to remove pixels that represent oceans
var elev = ee.Image('srtm90_v4');
var elevation_mask = elev.mask();


//---DMSP---
//Select time
//DMSP is avaiable between 1992 and 2012 (yearly)
var DMSP_T1_a = '1993-01-01';
var DMSP_T1_b = '1993-12-31';
var DMSP_T2_a = '2012-01-01';
var DMSP_T2_b = '2012-12-31';

//Load data
var DMSP = ee.ImageCollection('NOAA/DMSP-OLS/NIGHTTIME_LIGHTS')
            .select('stable_lights');

//Transform to Image using .mean as reducer and .updateMask to remove ocean pixels
var DMSP_T1 = DMSP.filterDate(DMSP_T1_a, DMSP_T1_b).mean()
                  .updateMask(elevation_mask); 
                  
var DMSP_T2 = DMSP.filterDate(DMSP_T2_a, DMSP_T2_b).mean()
                  .updateMask(elevation_mask);

//Calculate change 
var DMSP_change = DMSP_T2.subtract(DMSP_T1);

//Display maps
Map.addLayer(DMSP_T1, {min:10, max:45}, 'DMSP T1');
Map.addLayer(DMSP_T2, {min:10, max:45}, 'DMSP T2');
Map.addLayer(DMSP_change, {min:-20, max:20 , palette: ['blue', 'white', 'red']}, 'DMSP T2-T1 rad');


//---VIRRS---
//Select time
//VIRRS is available between 2012 and present (monthly)
var VIIRS_T1_a = '2012-09-01';
var VIIRS_T1_b = '2012-10-31';
var VIIRS_T2_a = '2020-09-01';
var VIIRS_T2_b = '2020-10-31';

//Load data
var VIIRS = ee.ImageCollection('NOAA/VIIRS/DNB/MONTHLY_V1/VCMCFG')
                  .filterDate('2012-01-01', '2021-12-31')
                  .select('avg_rad');

// Transform to Image using .mean as reducer and .updateMask to remove ocean pixels
var VIIRS_T1 = VIIRS.filterDate(VIIRS_T1_a, VIIRS_T1_b).mean()
                  .updateMask(elevation_mask);

var VIIRS_T2 = VIIRS.filterDate(VIIRS_T2_a, VIIRS_T2_b).mean()
                  .updateMask(elevation_mask);

//Calculate change 
var VIIRS_change = VIIRS_T2.subtract(VIIRS_T1);

//Display maps
Map.addLayer(VIIRS_T1, {min:0, max:10}, 'VIIRS T1');
Map.addLayer(VIIRS_T2, {min:0, max:10}, 'VIIRS T2');
Map.addLayer(VIIRS_change, {min:-20, max:20 , palette: ['blue', 'white', 'red']}, 'VIIRS T2-T1');
```


****

### $\second{Surface Classification}$

![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/veg.png)

|NAIP |Sentinel-2 |Landsat (1-9) |
|-----|-----|-----|
|<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/naip.jpg" width="250"> |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/sentinel-2.jpg" width="250"> |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/landsat-9.jpg" width="250"> |
|Continental US |Global |Global |
|2006, 2009, 2011, 2013, 2015, 2017, 2019 |2016 - present |1999 - present |
|Yearly mosaic |Revisit time of 10 days (5 days from 2019) |Revisit time of 16 days |
|1m resolution |10m and 20m resolution |30m resolution |
|4 spectral bands (R, G, B, IR)|13 spectral bands |11 spectral bands | 

***

### $\second{Surface Temperature}$

****

### $\second{Surface Modeling}$

Radar imagery from space enables full-field observation of the earth, even where the signal is obstructed by cloud cover. The scattering of the radar pulse arriving on Earth is a function of surface morphology. For example, urban centers and sharp-edged objects (such as buildings, ships, or steep mountains) have high backscatter signals while water absorbs the pulse with low reflection. Analysis of the return signal's phase can be used to map the Earthâ€™s surface elevation (including buildings, trees, etc.) and can be used to map changes to the Earth surface (e.g., earthquakes, landslides, or subsidence due to tunneling, etc.). 

<br>

#### $\third{- Digital Surface Model (DSM)}$ 

Captures both the natural and built/artificial features of the environment

|Copernicus (TerraSAR-X & TanDEM-X) |Shuttle Radar Topography Mission (SRTM) |Advanced Land Observing Satellite (ALOS) |
|-----|-----|-----|
|<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/copernicus.jpg" width="250"> |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/srtm.jpg" width="250"> |<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/alos.jpg" width="250"> |
|Worldwide at 30m planar resolution |Worldwide at 30m planar resolution |Worldwide at 30m planar resolution |
|2019 |2000 |2012 |

<br> 

#### $\third{- Digital Elevation Model (DEM)}$ 

Represents the bare-Earth surface, removing all natural and built features. A Digital Terrain model (DTM) augments a DEM by including vector features of the natural terrain, such as rivers and ridges.

* USGS DTM is available across the US at 10 meter Resolution. There are areas in the US where 1m data is also available.



<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Cities from the Sky}$

Aerial platforms, temporal-spatial tradeoffs, characterization and change detection, national record and inventories

****

### $\second{Lab}$

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Cities from Space}$

***

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Cities from Rooftops}$

Ground-based observation platforms, spectral characterization, temporal characterization, agency records.

****

### $\second{Lab}$

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Cities from Streets}$

Fixed and mobile sensing platforms, sensor networks, data acquisition and processing.

****

### $\second{Lab}$

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Cities and Citizens}$

Citizens as sensors, mobile sensing.

****

### $\second{Population Density}$

The Gridded Population of the World, (GPWv4)

* Models the distribution of human population (counts and densities) on a continuous global raster surface
* Population input data were collected at the most detailed spatial resolution available from the results of the 2010 round of Population and Housing Censuses, which occurred between 2005 and 2014
* Year estimates available: 2000, 2005, 2010, 2015, 2020

|Observations |Count |Density |
|-------------|------|--------|
|![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/gpw1.jpg)|![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/gpw2.jpg)|![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/gpw3.jpg)|


```
//Load data
var pop_collection = ee.ImageCollection("CIESIN/GPWv411/GPW_UNWPP-Adjusted_Population_Count")
    .select('unwpp-adjusted_population_count');
    
//Choose date range
var T1_start = '2000-01-01';
var T1_ends = '2000-12-31';

var T2_start = '2020-01-01';
var T2_ends = '2020-12-31';

//Pull population for date range
var T1_pop = pop_collection.filterDate(T1_start, T1_ends).first();
var T2_pop  = pop_collection.filterDate(T2_start, T2_ends).first(); 

//Calculate population change 
var T2T1_pop_change = T2_pop.subtract(T1_pop);

//Plot
Map.setCenter(-74.0060, 40.7128, 9); //New York, United States
Map.addLayer(T1_pop, {min: 0, max: 2000, palette: [ 'ffffff', 'red' ]}, 'Population T1');
Map.addLayer(T2_pop, {min: 0, max: 2000, palette: [ 'ffffff', 'red' ]}, 'Population T2');
Map.addLayer(T2T1_pop_change, { min:-300, max: 300, palette: ['blue','black','red']}, 'Pop Change T1-T2');
```

![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/gpw4.jpg)

```
//Select ROI
var ROI = ee.FeatureCollection("users/rmb623/nyc");
Map.addLayer(ROI, {}, 'ROI', 0);

//Summary statistics  
var changeStats = T2T1_pop_change.reduceRegion(
  {reducer: ee.Reducer.mean()
            .combine({reducer2: ee.Reducer.stdDev(), sharedInputs: true})
            .combine({reducer2: ee.Reducer.percentile({percentiles:[25,50,75]}), sharedInputs: true})
            .combine({reducer2: ee.Reducer.count(), sharedInputs: true}),
  geometry: ROI.geometry()});
  
print(changeStats);

//Plotting total population
var pop_total = ui.Chart.image.series(
  pop_collection, 
  ROI, 
  ee.Reducer.sum()); //.mean() can be used for denisty

//Set chart attributes (title, axis title, etc)
pop_total.setOptions({
  title: 'Total Population of NYC',
  vAxis: {textStyle: {fontSize: 14}},
  hAxis: {title: 'Year', format: 'yyyy', gridlines: {count: 7}, 
  titleTextStyle: {italic: false, bold: true, fontSize:14}, 
  textStyle: {fontSize: 14}
  }});

print(pop_total);
```
![](https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Spatial/gpw5.png)

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>

# $\first{Programs}$

***

<div align="center">

<img src="https://raw.githubusercontent.com/social-lorax/new_guides/main/Images/Underlines/spatial.gif" width="1000" height="100">

</div>
